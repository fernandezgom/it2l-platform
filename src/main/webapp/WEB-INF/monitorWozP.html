<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:th="http://www.thymeleaf.org"
	  xmlns:tiles="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org"
	  lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"/>
	<!--<link rel="stylesheet" type="text/css" media="screen, projection" href="../styles/it2lmainstyles.css" />-->
	<link rel="stylesheet" type="text/css" media="screen, projection" href="/italk2learn/styles/it2lmainstyles.css" />
	<link rel="stylesheet" type="text/css" media="screen, projection" href="/italk2learn/styles/languageswitcher.css" />
	<script type="text/javascript" src="/italk2learn/js/history/history.js"></script>
	<script type="text/javascript" src="/js/swfobject.js" th:src="@{/resources/js/swfobject.js}"></script>
    <script type="text/javascript" src="/js/unity2.js" th:src="@{/resources/js/unity2.js}"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.js'></script>
    <script type="text/javascript" src='js/languageswitcher.js'></script>
    <script type="text/javascript" src='js/scripts/strophe.js'></script>
    <script type="text/javascript" src='js/scripts/flXHR.js'></script>
    <script type="text/javascript" src='js/scripts/strophe.flxhr.js'></script>
	<script type="text/javascript" src="http://www.google.com/jsapi" charset="utf-8"></script>
	<script type="text/javascript" src='sequence/js/monitorWOZClient.js'></script>

    <script type="text/javascript" src="#" th:src="@{/resources/dojo/dojo.js}"></script>
    <script type="text/javascript" src="#" th:src="@{/resources/spring/Spring.js}"></script>
    <script type="text/javascript" src="#" th:src="@{/resources/spring/Spring-Dojo.js}"></script>
</head>

<body class="back" style="margin-top:0px; height:inherit; margin-bottom:0px;">
<div class="background" style="margin-left: auto;margin-right: auto; height:initial;">
 	<table align="center">
        <tr>
            <td>

				 <div>
				 <a href="#" th:href="@{/}">
				 <img src="../images/iLearnFraction_banner_05.jpg" th:src="@{/resources/images/iLearnFraction_banner_05.jpg}" alt="italk2learn" />
				  </a>
				</div>

            </td>
        </tr>
    </table>
	<table align="center">
         <tr align="center">
            <td align="center">
  <!--dark gray--><div id="wrapper_dark_gray" style="height: 945px; width: 1080px; padding-top:20px;">
				<div style="width: 100%">
					 <div style="display:inline; margin-left: 10px; float: left; width:180px;">
						<a href="#" th:href="@{/exercise}" class="it2lbutton" style="padding-left: 7px; padding-right: 7px;"> <img style="vertical-align:middle" th:src="@{/resources/images/bt_arrow_left.png}" src="../images/bt_arrow_left.png"></img>  Back to Exercise </a>
					</div>
					   <div style="display:inline; width:76%;">
						<span style="display:inline; font-weight: bold;"> Welcome Student </span> <div id="user" style="font-weight: bold; display:inline;"> Name </div>
					</div>
					<!--<div sec:authorize="hasRole('ROLE_USER')" th:if="${#authentication}"  style="display: inline; float : right; width:180px; font-weight:bold;">
						<a href="#" th:href="@{/auth/logout}" style="color:#e74c3c; font-weight:bold;">Logout</a>
					</div>-->
					<div sec:authorize="hasRole('ROLE_USER')" th:if="${#authentication}" style="display:inline; float: right; width:12%">
						<a href="#" th:href="@{/auth/logout}" style="color:#e74c3c; font-weight:bold; font-size:13px;">Logout</a>
					</div>
				</div>
<!--light gray--><div id="wrapper_light_gray" style="height: 780px; width: 1060px; margin-top: 30px;">
						<div style="height: 80px;padding-top: 20px;"><span style="color: #0076a3; font-weight: bold; font-size:23px;"> Wizard of Oz Tool </span></div>
						<table style="width: 800px; height: 600px;">
							<tr align="left">
								<td align="left">
									<table>
										<tr>
											<th>Connect to WOZ</th>
										</tr>
										<tr>
											<td>
												<form th:object="${messageInfo}">
													Choose an user
													<select id="usList" th:field="*{exercise}">
													<option th:each="user : ${allStudents}" th:value="${user.user}" th:text="${user.user}">Option</option>
													</select>
												</form>
											</td>
											<td>
												<input id="submitUser" name="submitUser" type="button" value="Connect" />
											</td>
										</tr>
									</table>
									<table>
										<tr>
											<th>Choose a sequence for an user</th>
										</tr>
										<tr>
											<td>
												User
											</td>
											<td>
												<input id="user" name="user" type="text" th:value="*{user}" />
											</td>
										</tr>
										<tr>
											<td>
												Write id's separated by commas
											</td>
											<td>
												<input id="exList" name="exList" type="text" th:value="*{idUser}" size="50"/>
											</td>
										</tr>
										<tr>
											<td>
											</td>
											<td align="right">
												<input id="submit" name="submit" type="button" value="Submit" />
											</td>
										</tr>
									</table>
								</td>
							</tr>
							<tr align="left">
								<td align="left">
									<div id='chat-area'>
								 		<ul></ul>
									</div>
								</td>
								<td>
						 			<table>
						 				<tr>
											<td>
												<input type="submit" id="testConn" value="Test Conn"/>
											</td>
										 </tr>
										 <tr>
											<td>
												<input type="submit" id="nextBHandler" value="Disable Next"/>
											</td>
										 </tr>
										 <tr>
											<td>
												<input type="submit" id="doneBHandler" value="Disable Done"/>
											</td>
										 </tr>
						 			</table>
								</td>
							</tr>
					</table>

				<!-- approval dialog -->
			   <div id='approve_dialog' class='hidden'>
				 <p><span id='approve-jid'></span> has requested a subscription to your presence.  Approve or deny?</p>
			   <script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
			   <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js'></script>
			   <script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.js'></script>
			   <script src='js/scripts/strophe.js'></script>
			   <script src='js/scripts/flXHR.js'></script>
			   <script src='js/scripts/strophe.flxhr.js'></script>
			   <script src='js/monitorWOZ.js'></script>
			   <script src='js/submitWOZ.js'></script>
			   </div>
<!--light gray--></div>
<!--dark gray--></div>
            </td>
         </tr>
    </table>


<script>
var myVar=setInterval(function(){myTimer()},1000);
function myTimer() {
    var d = new Date();
    document.getElementById("demo").innerHTML = d.toLocaleTimeString();
}
</script>

	<script type="text/javascript">
	</script>
	<script type="text/javascript">

		$.ajax({
			type: 'GET',
			url: "sequence/getUser",
			success: function (data) {
				loadFlashMovie(data);
			},
			error: function (jqXHR, status, error) {
			}
		});
		function loadFlashMovie (us){
		     // For version detection, set to min. required Flash Player version, or 0 (or 0.0.0), for no version detection.
		     var swfVersionStr = "11.1.0";
		     // To use express install, set to playerProductInstall.swf, otherwise the empty string.
		     var xiSwfUrlStr = "playerProductInstall.swf";
		     var flashvars = {
		     	  user: us
		         };
		     var params = {};
		     params.quality = "high";
		     params.bgcolor = "#ffffff";
		     params.allowscriptaccess = "sameDomain";
		     params.allowfullscreen = "true";
		     var attributes = {};
		     attributes.id = "It2lSpeechInterfaceMain";
		     attributes.name = "It2lSpeechInterfaceMain";
		     attributes.align = "middle";
		     swfobject.embedSWF(
		             "sequence/It2lSpeechInterfaceMain.swf", "speechRecognition",
		             "250", "250",
		             swfVersionStr, xiSwfUrlStr,
		             flashvars, params, attributes);
		     // JavaScript enabled so display the flashContent div in case it is not replaced with a swf object.
		     swfobject.createCSS("#speechRecognition", "display:block;text-align:right;");
		  }
    </script>
	<noscript>
		<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
			width="250" height="250" id="Italk2learnSpeechRecognizer">
			<param name="movie" value="sequence/It2lSpeechInterfaceMain.swf" />
			<param name="quality" value="high" />
			<param name="bgcolor" value="#ffffff" />
			<param name="allowScriptAccess" value="sameDomain" />
			<param name="allowFullScreen" value="true" />
			<!--[if !IE]>-->
			<object type="application/x-shockwave-flash"
				data="sequence/It2lSpeechInterfaceMain.swf" width="250" height="250">
				<param name="quality" value="high" />
				<param name="bgcolor" value="#ffffff" />
				<param name="allowScriptAccess" value="sameDomain" />
				<param name="allowFullScreen" value="true" />
				<!--<![endif]-->
				<!--[if gte IE 6]>-->
				<p>Either scripts and active content are not permitted to run or
					Adobe Flash Player version 11.1.0 or greater is not installed.</p>
				<!--<![endif]-->
				<a href="http://www.adobe.com/go/getflashplayer"> <img
					src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif"
					alt="Get Adobe Flash Player" />
				</a>
				<!--[if !IE]>-->
			</object>
			<!--<![endif]-->
		</object>
	</noscript>
	<!--<div sec:authorize="hasRole('ROLE_ADMIN')" style="background: #ffffff">
		<p style="margin-top: 0px;">
			Choose exercise
	 	<select id="exList">
    		 <option th:each="exercise : ${allExercises}" th:value="${exercise.idExercise}" th:text="${exercise.exercise}">Option</option>
     	</select>
     	<input id="submitEx" type="button" value="Submit" />
		</p>
	</div>-->
	<div id="player"></div>
	<audio controls="controls" id="speechProductionPlayer" hidden="true"></audio>
	</div>
</body>
</html>